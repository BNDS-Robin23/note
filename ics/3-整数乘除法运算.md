# 乘除法
## 乘法
### 乘法溢出判定
### 特殊问题：变量和常数之间的乘运算
+ 通常使用移位、加法和减法的组合来代替变量和常数的乘法运算。  
  例如对于x*20，可分解为x*（16+4）=x<<4+x<<2

## 除法
### 溢出
+ 一般情况下除法不需要考虑溢出的问题
### 舍入问题
+ 舍入原则：向靠近原点的方向进行舍入
+ 由于变量除以变量时的舍入太过复杂，在此不做赘述。

### 除0问题
+ 一般交给系统处理。

### 一些指令级别的问题
```c
int a = 0x80000000
int b = a/-1;
printf("%d\n", b)
```
+ 在反汇编后我们会发现，在这里除以-1时编译器优化为了neg指令（取负指令）。

### 变量与常数之间的除法
+ 当变量除以2的幂的常数时，编译器一般使用右移位操作
  + 无符号
+ 当变量除常数不能整除时
  + 无符号数、带符号正整数：移出的低位直接丢弃
  + 带符号负整数：加偏移量$(2^k-1)$，然后再右移k位，然后再进行类似无符号数的截断操作（这里的k为右移位数）


```c
//一个例子。假设x为一个int型的变量，要求只用右移、加法和按位运算得到x/32
int div32(int x)
{
    int b = (x>>31) & 0x1F;
    return (x+b)>>5;
}
```

